# 交易平台启动说明

## 环境准备

### 1. 安装必要软件
- JDK 1.8 或更高版本
- Maven 3.6+
- Node.js 14+ 和 npm
- MySQL 8.0+
- Redis 6.0+
- RabbitMQ 3.8+

### 2. 启动中间件服务

#### 启动 MySQL
```bash
# Windows
net start MySQL80

# Linux/Mac
sudo systemctl start mysql
# 或
sudo service mysql start
```

#### 启动 Redis
```bash
# Windows (如果已安装Redis服务)
redis-server

# Linux/Mac
redis-server
# 或
sudo systemctl start redis
```

#### 启动 RabbitMQ
```bash
# Windows
rabbitmq-server

# Linux/Mac
sudo systemctl start rabbitmq-server
# 或
rabbitmq-server
```

## 数据库初始化

1. 登录 MySQL
```bash
mysql -u root -p
```

2. 执行初始化脚本
```bash
source database/init.sql
```

或者直接执行：
```bash
mysql -u root -p < database/init.sql
```

## 后端启动

1. 修改配置文件
编辑 `backend/src/main/resources/application.yml`，修改数据库、Redis、RabbitMQ的连接信息：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/trading_platform?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: your_password  # 修改为你的MySQL密码
  redis:
    host: localhost
    port: 6379
    password:  # 如果有密码，填写密码
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
```

2. 编译并启动
```bash
cd backend
mvn clean install
mvn spring-boot:run
```

或者使用IDE直接运行 `TradingPlatformApplication.java`

后端服务将在 `http://localhost:8080` 启动

## 前端启动

1. 安装依赖
```bash
cd frontend
npm install
```

2. 启动开发服务器
```bash
npm run serve
```

前端服务将在 `http://localhost:8081` 启动

## 访问系统

1. 打开浏览器访问：`http://localhost:8081`
2. 使用默认账号登录：
   - 用户名：`admin`
   - 密码：`admin123`

## 常见问题

### 1. 后端启动失败
- 检查 MySQL、Redis、RabbitMQ 是否已启动
- 检查配置文件中的连接信息是否正确
- 检查端口 8080 是否被占用

### 2. 前端启动失败
- 检查 Node.js 版本是否符合要求
- 删除 `node_modules` 文件夹，重新执行 `npm install`
- 检查端口 8081 是否被占用

### 3. 数据库连接失败
- 确认 MySQL 服务已启动
- 确认数据库 `trading_platform` 已创建
- 检查用户名和密码是否正确

### 4. Redis 连接失败
- 确认 Redis 服务已启动
- 检查 Redis 配置中的 host 和 port 是否正确
- 如果有密码，确认密码配置正确

### 5. RabbitMQ 连接失败
- 确认 RabbitMQ 服务已启动
- 检查 RabbitMQ 配置中的 host、port、username、password 是否正确

## 功能测试

### 1. 用户注册登录
- 访问登录页面，点击"注册"按钮
- 填写用户信息完成注册
- 使用注册的账号登录

### 2. 商品管理
- 登录后，点击"发布商品"
- 填写商品信息并发布
- 在"交易市场"中查看发布的商品

### 3. 购物流程
- 在"交易市场"浏览商品
- 点击"加入购物车"将商品添加到购物车
- 在"购物车"中修改数量或删除商品
- 点击"结算"创建订单
- 在"我的订单"中查看订单并完成支付

### 4. 权限管理
- 使用管理员账号登录
- 在"用户管理"中管理用户
- 在"角色管理"中创建和管理角色
- 在"权限管理"中创建和管理权限
- 在"菜单管理"中管理菜单结构

## 生产环境部署

### 后端部署
1. 打包项目
```bash
cd backend
mvn clean package
```

2. 运行 JAR 文件
```bash
java -jar target/trading-platform-1.0.0.jar
```

### 前端部署
1. 构建生产版本
```bash
cd frontend
npm run build
```

2. 将 `dist` 目录部署到 Nginx 或其他 Web 服务器

### 配置建议
- 修改 JWT 密钥为更安全的随机字符串
- 配置 HTTPS
- 设置合适的数据库连接池大小
- 配置 Redis 持久化
- 设置 RabbitMQ 集群（如需要）
- 配置日志级别和日志文件路径

